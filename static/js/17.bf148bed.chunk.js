(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[17],{1348:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o=n(3),i=n(39),r=n(30),a=n(412),c=n(205),s=n(1306),l=n(38),u=n(0),d=["links","action","heading","moreLink","sx"];function b(e){var t=e.links,n=e.action,b=e.heading,j=e.moreLink,f=void 0===j?[]:j,x=e.sx,O=Object(i.a)(e,d);return Object(u.jsxs)(a.a,{sx:Object(o.a)({mb:5},x),children:[Object(u.jsxs)(a.a,{sx:{display:"flex",alignItems:"center"},children:[Object(u.jsxs)(a.a,{sx:{flexGrow:1},children:[Object(u.jsx)(c.a,{variant:"h4",gutterBottom:!0,children:b}),Object(u.jsx)(l.b,Object(o.a)({links:t},O))]}),n&&Object(u.jsx)(a.a,{sx:{flexShrink:0},children:n})]}),Object(u.jsx)(a.a,{sx:{mt:2},children:Object(r.isString)(f)?Object(u.jsx)(s.a,{href:f,target:"_blank",variant:"body2",children:f}):f.map((function(e){return Object(u.jsx)(s.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e)}))})]})}},1466:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var o=n(3),i=n(9),r=n.n(i),a=n(19),c=n(17),s=n(239),l=n(163),u=(n(1427),n(1)),d=n(238),b=n(1294),j=n(2183),f=n(2204),x=n(2205),O=n(2124),h=n(2198),m=n(2200),p=n(2142),g=n(2184),v=n(2203),S=n(2165),y=n(2202),A=n(2160),P=n(2195),k=n(2180),w=n(2148),C=n(2149),E=n(2182),F=n(2206),z=n(1468),X=n.n(z),I=n(2193),R=n(206),_=n(416),q=n(49),B=n(0);function T(){var e=Object(R.c)((function(e){return e.PAX.PAX})),t=Object(R.c)((function(e){return e.PAX})).isEdit,n=Object(R.c)((function(e){return e.PAX.CIU.ciu})),i=Object(R.c)((function(e){return e.PAX.lastSerialNo})),w=Object(u.useState)(""),C=Object(c.a)(w,2),E=C[0],F=C[1],z=Object(R.c)((function(e){return e.location.regions})),X=Object(R.c)((function(e){return e.VIHCollecte.sexes})),I=Object(u.useState)(!1),T=Object(c.a)(I,2),N=(T[0],T[1]),D=Object(l.useSnackbar)().enqueueSnackbar,V=Object(R.b)(),U=Object(q.a)().user,L=Object(u.useRef)(),W=s.d().shape({prenom:s.f().required("Pr\xe9nom requis"),code:s.f().required("code requis"),nom_fb:s.f().nullable().notRequired(),phone:s.f().nullable().notRequired(),sexe:s.f().required("Sexe requis"),region:s.f().required("R\xe9gion requise"),ciu:s.f().required("CIU requis")}),H=Object(d.c)({enableReinitialize:!0,initialValues:{prenom:t?e.prenom:"",code:t?e.code:"",nom_fb:t?e.nom_fb:"",phone:t?e.phone:"",sexe:t?e.sexe:"",region:t?e.region:"",serial_no:t?e.serial_no:""},validationSchema:W,onSubmit:function(){var o=Object(a.a)(r.a.mark((function o(a,c){var s,l,u;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=c.setSubmitting,l=c.setErrors,(u=new FormData).append("prenom",a.prenom),u.append("code",n),u.append("nom_fb",a.nom_fb),u.append("phone",a.phone),u.append("sexe",a.sexe),u.append("region",E.id),u.append("serial_no",Number(i)+1),t&&(u.id=e.id),o.prev=10,console.log(u),!t){o.next=17;break}return o.next=15,V(Object(_.q)(u,e.id));case 15:o.next=19;break;case 17:return o.next=19,V(Object(_.a)(u));case 19:return o.next=21,V(Object(_.m)(n));case 21:return oe(),D(t?"Update success":"Nouvelle entr\xe9e enregistr\xe9e avec succ\xe8s",{variant:"success"}),N(!1),o.next=26,V(Object(_.e)());case 26:V(Object(_.p)(!1)),o.next=34;break;case 29:o.prev=29,o.t0=o.catch(10),console.error(o.t0),s(!1),l(o.t0);case 34:case"end":return o.stop()}}),o,null,[[10,29]])})));return function(e,t){return o.apply(this,arguments)}}()}),M=H.handleChange,J=H.getFieldProps,K=H.values,Q=H.handleSubmit,Z=H.touched,G=H.handleBlur,Y=H.errors,$=H.setSubmitting,ee=H.setFieldValue,te=H.isSubmitting,ne=H.resetForm,oe=function(){N(!1),V(Object(_.n)(!1)),V(Object(_.k)()),$(!1),ne()};return Object(u.useEffect)((function(){t||oe()}),[t]),Object(u.useEffect)((function(){L.current?L.current=!1:K.region&&K.sexe&&V(Object(_.c)({sexe:K.sexe,region:E.id}))}),[K.region,K.sexe]),Object(u.useEffect)((function(){K.code=n}),[n]),Object(u.useEffect)((function(){V(Object(_.d)())}),[]),Object(B.jsx)(d.b,{value:H,children:Object(B.jsx)(d.a,{autoComplete:"off",onSubmit:Q,children:Object(B.jsx)(j.a,{container:!0,spacing:3,justifyContent:"center",children:Object(B.jsx)(j.a,{item:!0,xs:12,children:Object(B.jsx)(f.a,{children:Object(B.jsx)(x.a,{children:Object(B.jsxs)(O.a,{spacing:3,direction:"column",children:["call"===U.role?Object(B.jsx)(h.a,{label:"T\xe9lephone",value:K.phone,onChange:M,onBlur:G,name:"phone",variant:"standard",required:!0,error:Boolean(Z.phone&&Y.phone),helperText:Z.phone&&Y.phone}):Object(B.jsx)(h.a,{label:"Nom Facebook",value:K.nom_fb,onChange:M,onBlur:G,name:"nom_fb",variant:"standard",required:!0,error:Boolean(Z.nom_fb&&Y.nom_fb),helperText:Z.nom_fb&&Y.nom_fb}),Object(B.jsx)(h.a,Object(o.a)(Object(o.a)({fullWidth:!0,label:"Pr\xe9nom",name:"prenom",onChange:M,onBlur:G},J("prenom")),{},{error:Boolean(Z.prenom&&Y.prenom),helperText:Z.prenom&&Y.prenom})),Object(B.jsxs)(m.a,{error:Boolean(Z.sexe&&Y.sexe),children:[Object(B.jsx)(p.a,{id:"demo-row-radio-buttons-group-label",children:"Sexe"}),Object(B.jsx)(g.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"sexe",value:K.sexe,onChange:M,children:X.map((function(e){return"all"!==e.name.toLowerCase()&&Object(B.jsx)(v.a,{value:e.id,control:Object(B.jsx)(S.a,{}),label:e.name})}))}),Object(B.jsx)(y.a,{children:Z.sexe&&Y.sexe})]}),Object(B.jsx)(A.a,{disablePortal:!0,id:"region",options:z,value:E,onChange:function(e,t){F(t)},inputValue:K.region,onInputChange:function(e,t){ee("region",t)},renderInput:function(e){return Object(B.jsx)(h.a,Object(o.a)(Object(o.a)({},e),{},{label:"R\xe9gion",variant:"standard"}))}}),Object(B.jsxs)(P.a,{variant:"body1",children:["Code: ",n]}),Object(B.jsxs)(O.a,{spacing:1,direction:"row",children:[Object(B.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",size:"large",loading:te,children:"Enregistrer"}),Object(B.jsx)(k.a,{type:"button",fullWidth:!0,variant:"outlined",onClick:function(){return oe()},children:"Nouveau"})]})]})})})})})})})}function N(){var e=Object(R.c)((function(e){return e.PAX.show})),t=Object(R.c)((function(e){return e.PAX})).isEdit,n=Object(R.b)(),o=function(){return n(Object(_.p)(!1))};return Object(B.jsxs)(w.a,{open:e,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(B.jsxs)(C.a,{sx:{p:3},children:[t?"Edition":"Nouveau PAX",e?Object(B.jsx)(E.a,{title:"Fermer",children:Object(B.jsx)(I.a,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(B.jsx)(X.a,{})})}):null]}),Object(B.jsx)(F.a,{children:Object(B.jsx)(T,{})})]})}},1745:function(e,t){},1746:function(e,t){},1868:function(e,t){},2164:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var o=n(1),i=n(33),r=n(1319),a=n(1300),c=n(327),s=n(34),l=n(84),u=n(414),d=n(1348),b=n(3),j=n(21),f=n(9),x=n.n(f),O=n(19),h=n(17),m=n(239),p=n(163),g=n(238),v=n(2124),S=n(2194),y=n(2195),A=n(2160),P=n(2198),k=n(206),w=n(421),C=n(415),E=n(417),F=n(416),z=n(49),X=n(0);function I(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(""|Object(k.c)((function(e){return e.PAX.PAX}))),a=Object(h.a)(r,2),c=(a[0],a[1],Object(o.useState)("")),s=Object(h.a)(c,2),l=s[0],u=s[1],d=Object(k.c)((function(e){return e.PAX.PAXs})),f=Object(k.c)((function(e){return e.location.regions})),I=Object(k.c)((function(e){return e.PAX.sexe})),R=Object(o.useState)(""),_=Object(h.a)(R,2),q=_[0],B=_[1],T=Object(k.b)(),N=Object(o.useState)(0),D=Object(h.a)(N,2),V=D[0],U=D[1],L=Object(p.useSnackbar)().enqueueSnackbar,W=Object(z.a)().user,H=m.d().shape({region:m.f().required("Entrer la r\xe9gion du PAX"),sexe:m.c().required("Entrer le sexe du PAX"),referent:m.f().required("Entrer le r\xe9f\xe9rent du PAX")}),M=Object(g.c)({enableReinitialize:!0,initialValues:{PAX:"",CIU:"",region:"",referent:"",sexe:""},validationSchema:H,onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(t,n){var o,i,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.setSubmitting,n.resetForm,i=n.setErrors,r={pax:l.id,referent:t.referent,responsable:W.id},e.prev=2,e.next=5,J(r);case 5:return e.next=7,K();case 7:return e.next=9,T(Object(F.k)());case 9:return u(null),e.next=12,T(Object(F.l)());case 12:return L("Enregistr\xe9e avec succ\xe8s",{variant:"success"}),e.next=15,T(Object(F.g)());case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0),o(!1),i(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()}),J=function(e){i([].concat(Object(j.a)(n),[Object(b.a)({id:V},e)])),U(V+1),console.log(e),T(Object(E.a)(e))},K=function(){G()},Q=(M.handleChange,M.values),Z=M.handleSubmit,G=(M.touched,M.handleBlur,M.errors,M.resetForm),Y=M.setFieldValue;M.isSubmitting,Object(o.useRef)(!0);return Object(o.useEffect)((function(){T(Object(w.c)()),T(Object(C.o)()),T(Object(F.g)())}),[]),Object(o.useEffect)((function(){var e,t,n;T(Object(F.j)(null===l||void 0===l?void 0:l.sexe)),Q.sexe=null===l||void 0===l?void 0:l.sexe,console.log("sexe: ".concat(I)),B((null===f||void 0===f||null===(e=f.filter((function(e){return e.id===(null===l||void 0===l?void 0:l.region)}))[0])||void 0===e?void 0:e.label)||"");var o={name:(null===l||void 0===l?void 0:l.prenom)||"",serial:"".concat((null===l||void 0===l?void 0:l.serial_no)||"","/").concat((null===l||void 0===l?void 0:l.date_inscription)||""),codeSexe:String((null===l||void 0===l||null===(t=l.code)||void 0===t?void 0:t.substring(0,1))||""),code:(null===l||void 0===l?void 0:l.code)||"",codeRegion:String((null===l||void 0===l||null===(n=l.code)||void 0===n?void 0:n.substring(11,13))||"")};T(Object(F.o)(o))}),[l]),Object(X.jsx)(g.b,{value:M,children:Object(X.jsx)(g.a,{noValidate:!0,autoComplete:"on",onSubmit:Z,children:Object(X.jsxs)(v.a,{direction:"column",spacing:3,sx:{mt:3},children:[Object(X.jsx)(S.a,{children:Object(X.jsx)(y.a,{variant:"subtitle1",children:"PAX"})}),Object(X.jsx)(A.a,{disablePortal:!0,name:"nomFb",options:d,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.nom_fb)||""},value:l,onChange:function(e,t){u(t)},inputValue:Q.nomFb,onInputChange:function(e,t){Y("nomFb",t)},renderInput:function(e){return Object(X.jsx)(P.a,Object(b.a)(Object(b.a)({},e),{},{label:"Nom Facebook du PAX",variant:"standard"}))}}),Object(X.jsxs)(y.a,{variant:"body1",children:["Prenom PAX: ",null===l||void 0===l?void 0:l.prenom," "]}),Object(X.jsxs)(y.a,{variant:"body1",children:["Sexe: ",I]}),Object(X.jsxs)(y.a,{variant:"body1",children:["Code Ezaho: ",null===l||void 0===l?void 0:l.code]}),Object(X.jsxs)(y.a,{variant:"body1",children:["R\xe9gion: ",q]})]})})})}var R=n(1717),_=function(e){var t=e.valueString,n=e.documentID;return Object(X.jsx)("div",{children:Object(X.jsx)(R.a,{id:n,value:t,size:256,bgColor:"#fff",fgColor:"#000",level:"H",includeMargin:!0})})},q=n(1718),B=n.p+"static/media/Carte-Ezaho.4471a660.png";q.Font.register({family:"Noto-Sans",src:"https://fontsfree.net//wp-content/fonts/basic/sans-serif/FontsFree-Net-NotoSans-Bold.ttf"}),q.Font.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"}),q.Font.register({family:"Myriad",src:"https://www.wfonts.com/download/data/2016/06/13/myriad-pro/MyriadPro-Bold.otf"});var T=q.StyleSheet.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},background:{position:"absolute",width:"100%",height:"auto",zIndex:-2},sidebar:{position:"absolute",left:"0px",top:"0px",width:"169px",height:"842px",zIndex:1},text:{margin:12,fontSize:14,textAlign:"justify",fontFamily:"Times-Roman"},title:{fontSize:24,textAlign:"center",fontFamily:"Oswald"},user:{fontSize:12,textAlign:"left",fontFamily:"Noto-Sans",top:72,left:80},series:{fontSize:12,textAlign:"left",fontFamily:"Oswald",color:"#fff",top:39,left:270},codeSexe:{fontSize:18,textAlign:"left",fontFamily:"Noto-Sans",color:"#000",top:118,left:32,position:"absolute"},code:{fontSize:18,textAlign:"left",fontFamily:"Noto-Sans",color:"#000",top:118,left:110,position:"absolute",letterSpacing:3},codeRegion:{fontSize:18,textAlign:"left",fontFamily:"Noto-Sans",color:"#fff",top:118,left:300,position:"absolute"},author:{fontSize:12,textAlign:"center",marginBottom:40},subtitle:{fontSize:18,margin:12,fontFamily:"Oswald"},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},QRImage:{position:"absolute",left:"280px",top:"159px",width:"54px",height:"auto",zIndex:0}}),N=function(e){var t,n=e.id,i=e.name,r=e.serial,a=e.codeSexe,c=e.code,s=e.codeRegion,l=Object(o.useState)(null===(t=document.getElementById(n))||void 0===t?void 0:t.toDataURL()),u=Object(h.a)(l,2),d=u[0],b=u[1];Object(o.useEffect)((function(){b(document.getElementById(n).toDataURL())}),[c]);var j=c.substring(2,10);return Object(X.jsx)(q.PDFViewer,{width:"100%",height:"400vh",children:Object(X.jsx)(q.Document,{children:Object(X.jsxs)(q.Page,{size:"B7",orientation:"landscape",children:[Object(X.jsx)(q.Image,{style:T.background,src:B,fixed:!0}),Object(X.jsx)(q.Image,{allowDangerousPaths:!0,src:d,style:T.QRImage}),Object(X.jsx)(q.Text,{style:T.series,children:r}),Object(X.jsx)(q.Text,{style:T.user,children:i}),Object(X.jsx)(q.Text,{style:T.codeSexe,children:a}),Object(X.jsx)(q.Text,{style:T.code,children:j}),Object(X.jsx)(q.Text,{style:T.codeRegion,children:s})]})})})},D=([{id:1234,value:"TEST1"},{id:1235,value:"TEST2"}].map((function(e){return e.id})),function(){var e=Object(k.c)((function(e){return e.PAX.PAX}));return console.log(e),Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{style:{display:"none"},children:Object(X.jsx)(_,{valueString:String((null===e||void 0===e?void 0:e.code)||""),documentID:1234})}),Object(X.jsx)(N,{id:1234,name:(null===e||void 0===e?void 0:e.name)||"",serial:(null===e||void 0===e?void 0:e.serial)||"",codeSexe:(null===e||void 0===e?void 0:e.codeSexe[0])||"",code:(null===e||void 0===e?void 0:e.code)||"",codeRegion:(null===e||void 0===e?void 0:e.codeRegion)||""})]})});n(1466);function V(){var e=Object(l.a)().themeStretch;Object(c.c)(),Object(i.g)().pathname,Object(i.i)().name;return Object(X.jsx)(u.a,{title:"Carte | e-zaho",children:Object(X.jsxs)(r.a,{maxWidth:!e&&"lg",children:[Object(X.jsx)(d.a,{heading:"Carte E-zaho",links:[{name:"Dashboard",href:s.b.EZAHO.dashboard},{name:"Carte",href:s.b.EZAHO.collecte}]}),Object(X.jsxs)(a.a,{container:!0,spacing:3,children:[Object(X.jsx)(a.a,{item:!0,xs:12,md:4,children:Object(X.jsx)(I,{})}),Object(X.jsx)(a.a,{item:!0,xs:12,md:8,children:Object(X.jsx)(D,{valueString:"M&E 3.0",documentID:"RAKOTO"})})]})]})})}}}]);
//# sourceMappingURL=17.bf148bed.chunk.js.map