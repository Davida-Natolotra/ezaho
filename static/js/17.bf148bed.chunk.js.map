{"version":3,"sources":["components/HeaderBreadcrumbs.js","components/ezaho/NewPax.js","components/ezaho/PAXSelect.js","components/Ezaho-card/qrcode.js","components/Ezaho-card/Carte-Ezaho.png","components/Ezaho-card/viewer.js","components/Ezaho-card/carte.js","pages/ezaho/Carte.js"],"names":["HeaderBreadcrumbs","links","action","heading","moreLink","sx","other","mb","display","alignItems","flexGrow","variant","gutterBottom","flexShrink","mt","isString","href","target","map","noWrap","PAXNewForm","currentPAX","useSelector","state","PAX","isEdit","CIU","ciu","lastSerialNumber","lastSerialNo","useState","valRegion","setValRegion","regions","location","sexes","VIHCollecte","setIsChanged","enqueueSnackbar","useSnackbar","dispatch","useDispatch","user","useAuth","isInit","useRef","PAXSchema","Yup","shape","prenom","required","code","nom_fb","nullable","notRequired","phone","sexe","region","formik","useFormik","enableReinitialize","initialValues","serial_no","validationSchema","onSubmit","values","a","setSubmitting","setErrors","dataSubmit","FormData","append","id","Number","console","log","updatePAX","createPAX","saveCIU","resetFormInit","getMyPAX","setShow","error","handleChange","getFieldProps","handleSubmit","touched","handleBlur","errors","setFieldValue","isSubmitting","resetForm","setEdit","resetPAX","useEffect","current","generateCIU","getLastSerialNumber","value","autoComplete","container","spacing","justifyContent","item","xs","direction","role","label","onChange","onBlur","name","Boolean","helperText","fullWidth","row","toLowerCase","control","disablePortal","options","event","newValue","inputValue","onInputChange","newInputValue","renderInput","params","type","size","loading","onClick","NewPAX","openDialog","show","handleCloseDialog","open","onClose","p","title","position","right","top","color","theme","palette","grey","CollecteForm","allCollectes","setAllCollectes","valPAX","setValPAX","PAXs","sexeName","setId","Schema","referent","pax","responsable","submit","resetAllForm","resetSexe","getPAXFB","createCollecte","getRegions","getSexes","getSexe","filter","dataPAX","serial","date_inscription","codeSexe","String","substring","codeRegion","setPax","noValidate","Stack","Box","Typography","Autocomplete","getOptionLabel","option","nomFb","TextField","QRGenerator","valueString","documentID","bgColor","fgColor","level","includeMargin","Font","register","family","src","styles","StyleSheet","create","body","paddingTop","paddingBottom","paddingHorizontal","background","width","height","zIndex","sidebar","left","text","margin","fontSize","textAlign","fontFamily","series","letterSpacing","author","marginBottom","subtitle","header","QRImage","Viewer","document","getElementById","toDataURL","dataUrl","setDataUrl","codeEzaho","orientation","style","CarteBG","fixed","allowDangerousPaths","Carte","data","Collecte","themeStretch","useSettings","useLocation","pathname","useParams","Page","Container","maxWidth","PATH_DASHBOARD","EZAHO","dashboard","collecte","Grid","md"],"mappings":"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","file":"static/js/17.bf148bed.chunk.js","sourcesContent":["import { isString } from 'lodash';\nimport PropTypes from 'prop-types';\n// material\nimport { Box, Typography, Link } from '@material-ui/core';\n//\nimport { MBreadcrumbs } from './@material-extend';\n\n// ----------------------------------------------------------------------\n\nHeaderBreadcrumbs.propTypes = {\n  links: PropTypes.array,\n  action: PropTypes.node,\n  heading: PropTypes.string.isRequired,\n  moreLink: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  sx: PropTypes.object\n};\n\nexport default function HeaderBreadcrumbs({ links, action, heading, moreLink = '' || [], sx, ...other }) {\n  return (\n    <Box sx={{ mb: 5, ...sx }}>\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        <Box sx={{ flexGrow: 1 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            {heading}\n          </Typography>\n          <MBreadcrumbs links={links} {...other} />\n        </Box>\n\n        {action && <Box sx={{ flexShrink: 0 }}>{action}</Box>}\n      </Box>\n\n      <Box sx={{ mt: 2 }}>\n        {isString(moreLink) ? (\n          <Link href={moreLink} target=\"_blank\" variant=\"body2\">\n            {moreLink}\n          </Link>\n        ) : (\n          moreLink.map((href) => (\n            <Link noWrap key={href} href={href} variant=\"body2\" target=\"_blank\" sx={{ display: 'table' }}>\n              {href}\n            </Link>\n          ))\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import * as Yup from \"yup\";\nimport PropTypes from \"prop-types\";\nimport { useSnackbar } from \"notistack5\";\nimport moment from \"moment\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { Form, FormikProvider, useFormik } from \"formik\";\n// material\nimport { LoadingButton } from \"@material-ui/lab\";\nimport {\n\tCard,\n\tCardContent,\n\tChip,\n\tGrid,\n\tStack,\n\tRadio,\n\tSwitch,\n\tSelect,\n\tTextField,\n\tInputLabel,\n\tTypography,\n\tRadioGroup,\n\tFormControl,\n\tAutocomplete,\n\tInputAdornment,\n\tFormHelperText,\n\tFormControlLabel,\n\tButton,\n\tFormLabel,\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tTooltip,\n} from \"@mui/material\";\n\nimport CloseIcon from \"@mui/icons-material/Close\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport frLocale from \"date-fns/locale/fr\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\nimport { frFR as calFR } from \"@mui/x-date-pickers\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n\tcreatePAX,\n\tresetPAX,\n\tsetEdit,\n\tsetShow,\n\tupdatePAX,\n\tgenerateCIU,\n\tsaveCIU,\n\tgetMyPAX,\n\tgetLastSerialNumber,\n} from \"../../redux/slices/pax\";\nimport useAuth from \"../../hooks/useAuth\";\n\n// ----------------------------------------------------------------------\n\n// ----------------------------------------------------------------------\n\nPAXNewForm.propTypes = {\n\tisEdit: PropTypes.bool,\n\tcurrentPAX: PropTypes.object,\n};\n\nfunction PAXNewForm() {\n\tconst currentPAX = useSelector((state) => state.PAX.PAX);\n\tconst { isEdit } = useSelector((state) => state.PAX);\n\tconst CIU = useSelector((state) => state.PAX.CIU.ciu);\n\tconst lastSerialNumber = useSelector((state) => state.PAX.lastSerialNo);\n\tconst [valRegion, setValRegion] = useState(\"\");\n\tconst regions = useSelector((state) => state.location.regions);\n\tconst sexes = useSelector((state) => state.VIHCollecte.sexes);\n\tconst [isChanged, setIsChanged] = useState(false);\n\n\tconst { enqueueSnackbar } = useSnackbar();\n\tconst dispatch = useDispatch();\n\n\tconst { user } = useAuth();\n\tconst isInit = useRef();\n\n\tconst PAXSchema = Yup.object().shape({\n\t\tprenom: Yup.string().required(\"Prénom requis\"),\n\t\tcode: Yup.string().required(\"code requis\"),\n\t\tnom_fb: Yup.string().nullable().notRequired(),\n\t\tphone: Yup.string().nullable().notRequired(),\n\t\tsexe: Yup.string().required(\"Sexe requis\"),\n\t\tregion: Yup.string().required(\"Région requise\"),\n\t\tciu: Yup.string().required(\"CIU requis\"),\n\t});\n\n\tconst formik = useFormik({\n\t\tenableReinitialize: true,\n\t\tinitialValues: {\n\t\t\tprenom: isEdit ? currentPAX.prenom : \"\",\n\t\t\tcode: isEdit ? currentPAX.code : \"\",\n\t\t\tnom_fb: isEdit ? currentPAX.nom_fb : \"\",\n\t\t\tphone: isEdit ? currentPAX.phone : \"\",\n\t\t\tsexe: isEdit ? currentPAX.sexe : \"\",\n\t\t\tregion: isEdit ? currentPAX.region : \"\",\n\t\t\tserial_no: isEdit ? currentPAX.serial_no : \"\",\n\t\t},\n\t\tvalidationSchema: PAXSchema,\n\t\tonSubmit: async (values, { setSubmitting, setErrors }) => {\n\t\t\tconst dataSubmit = new FormData();\n\t\t\tdataSubmit.append(\"prenom\", values.prenom);\n\t\t\tdataSubmit.append(\"code\", CIU);\n\t\t\tdataSubmit.append(\"nom_fb\", values.nom_fb);\n\t\t\tdataSubmit.append(\"phone\", values.phone);\n\t\t\tdataSubmit.append(\"sexe\", values.sexe);\n\t\t\tdataSubmit.append(\"region\", valRegion.id);\n\t\t\tdataSubmit.append(\"serial_no\", Number(lastSerialNumber) + 1);\n\t\t\tif (isEdit) {\n\t\t\t\tdataSubmit.id = currentPAX.id;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconsole.log(dataSubmit);\n\t\t\t\tif (isEdit) {\n\t\t\t\t\tawait dispatch(updatePAX(dataSubmit, currentPAX.id));\n\t\t\t\t} else {\n\t\t\t\t\tawait dispatch(createPAX(dataSubmit));\n\t\t\t\t}\n\t\t\t\tawait dispatch(saveCIU(CIU));\n\t\t\t\tresetFormInit();\n\t\t\t\tenqueueSnackbar(\n\t\t\t\t\t!isEdit\n\t\t\t\t\t\t? \"Nouvelle entrée enregistrée avec succès\"\n\t\t\t\t\t\t: \"Update success\",\n\t\t\t\t\t{ variant: \"success\" }\n\t\t\t\t);\n\n\t\t\t\tsetIsChanged(false);\n\t\t\t\tawait dispatch(getMyPAX());\n\t\t\t\tdispatch(setShow(false));\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tsetSubmitting(false);\n\t\t\t\tsetErrors(error);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst {\n\t\thandleChange,\n\t\tgetFieldProps,\n\t\tvalues,\n\t\thandleSubmit,\n\t\ttouched,\n\t\thandleBlur,\n\t\terrors,\n\t\tsetSubmitting,\n\t\tsetFieldValue,\n\t\tisSubmitting,\n\t\tresetForm,\n\t} = formik;\n\n\tconst resetFormInit = () => {\n\t\tsetIsChanged(false);\n\t\tdispatch(setEdit(false));\n\t\tdispatch(resetPAX());\n\t\tsetSubmitting(false);\n\t\tresetForm();\n\t};\n\n\tuseEffect(() => {\n\t\tif (!isEdit) {\n\t\t\tresetFormInit();\n\t\t}\n\t}, [isEdit]);\n\n\tuseEffect(() => {\n\t\tif (isInit.current) {\n\t\t\tisInit.current = false;\n\t\t} else {\n\t\t\tif (values.region && values.sexe) {\n\t\t\t\tdispatch(generateCIU({ sexe: values.sexe, region: valRegion.id }));\n\t\t\t}\n\t\t}\n\t}, [values.region, values.sexe]);\n\n\tuseEffect(() => {\n\t\tvalues.code = CIU;\n\t}, [CIU]);\n\n\tuseEffect(() => {\n\t\tdispatch(getLastSerialNumber());\n\t}, []);\n\n\treturn (\n\t\t<FormikProvider value={formik}>\n\t\t\t<Form autoComplete=\"off\" onSubmit={handleSubmit}>\n\t\t\t\t<Grid container spacing={3} justifyContent=\"center\">\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t\t<Stack spacing={3} direction=\"column\">\n\t\t\t\t\t\t\t\t\t{user.role === \"call\" ? (\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Télephone\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.phone}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(touched.phone && errors.phone)}\n\t\t\t\t\t\t\t\t\t\t\thelperText={touched.phone && errors.phone}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Nom Facebook\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.nom_fb}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t\tname=\"nom_fb\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(touched.nom_fb && errors.nom_fb)}\n\t\t\t\t\t\t\t\t\t\t\thelperText={touched.nom_fb && errors.nom_fb}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tlabel=\"Prénom\"\n\t\t\t\t\t\t\t\t\t\tname=\"prenom\"\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t{...getFieldProps(\"prenom\")}\n\t\t\t\t\t\t\t\t\t\terror={Boolean(touched.prenom && errors.prenom)}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.prenom && errors.prenom}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormControl error={Boolean(touched.sexe && errors.sexe)}>\n\t\t\t\t\t\t\t\t\t\t<FormLabel id=\"demo-row-radio-buttons-group-label\">\n\t\t\t\t\t\t\t\t\t\t\tSexe\n\t\t\t\t\t\t\t\t\t\t</FormLabel>\n\t\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"demo-row-radio-buttons-group-label\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"sexe\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.sexe}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{sexes.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(sexe) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsexe.name.toLowerCase() !== \"all\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={sexe.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={sexe.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t\t\t{touched.sexe && errors.sexe}\n\t\t\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\t\t\tdisablePortal\n\t\t\t\t\t\t\t\t\t\tid=\"region\"\n\t\t\t\t\t\t\t\t\t\toptions={regions}\n\t\t\t\t\t\t\t\t\t\tvalue={valRegion}\n\t\t\t\t\t\t\t\t\t\tonChange={(event, newValue) => {\n\t\t\t\t\t\t\t\t\t\t\tsetValRegion(newValue);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tinputValue={values.region}\n\t\t\t\t\t\t\t\t\t\tonInputChange={(event, newInputValue) => {\n\t\t\t\t\t\t\t\t\t\t\tsetFieldValue(\"region\", newInputValue);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Région\"\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\">Code: {CIU}</Typography>\n\n\t\t\t\t\t\t\t\t\t<Stack spacing={1} direction=\"row\">\n\t\t\t\t\t\t\t\t\t\t<LoadingButton\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t\tloading={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t// disabled={!isChanged}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tEnregistrer\n\t\t\t\t\t\t\t\t\t\t</LoadingButton>\n\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => resetFormInit()}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tNouveau\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Form>\n\t\t</FormikProvider>\n\t);\n}\nexport default function NewPAX() {\n\tconst openDialog = useSelector((state) => state.PAX.show);\n\tconst { isEdit } = useSelector((state) => state.PAX);\n\tconst dispatch = useDispatch();\n\tconst handleCloseDialog = () => dispatch(setShow(false));\n\treturn (\n\t\t<Dialog\n\t\t\topen={openDialog}\n\t\t\tonClose={handleCloseDialog}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle sx={{ p: 3 }}>\n\t\t\t\t{isEdit ? \"Edition\" : \"Nouveau PAX\"}\n\t\t\t\t{openDialog ? (\n\t\t\t\t\t<Tooltip title=\"Fermer\">\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-label=\"close\"\n\t\t\t\t\t\t\tonClick={handleCloseDialog}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\t\tright: 8,\n\t\t\t\t\t\t\t\ttop: 8,\n\t\t\t\t\t\t\t\tcolor: (theme) => theme.palette.grey[500],\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t) : null}\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<PAXNewForm />\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","import * as Yup from \"yup\";\nimport PropTypes from \"prop-types\";\nimport { useSnackbar } from \"notistack5\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { Form, FormikProvider, useFormik } from \"formik\";\n// material\nimport { LoadingButton } from \"@material-ui/lab\";\nimport {\n\tStack,\n\tTextField,\n\tTypography,\n\tAutocomplete,\n\tButton,\n\tBox,\n} from \"@mui/material\";\nimport { useSelector, useDispatch } from \"react-redux\";\n// utils\nimport { getRegions } from \"../../redux/slices/location\";\nimport { getSexes } from \"../../redux/slices/collecteVIH\";\nimport { createCollecte } from \"../../redux/slices/ezaho\";\nimport {\n\tsetShow,\n\tgetPAXFB,\n\tgetSexe,\n\tresetPAX,\n\tresetSexe,\n\tsetPax,\n} from \"../../redux/slices/pax\";\nimport useAuth from \"../../hooks/useAuth\";\n\n// ----------------------------------------------------------------------\n\nCollecteForm.propTypes = {\n\tisEdit: PropTypes.bool,\n\tcurrentProduct: PropTypes.object,\n};\n\nexport default function CollecteForm() {\n\tconst [allCollectes, setAllCollectes] = useState([]);\n\tconst [valTypeCible, setValTypeCible] = useState(\n\t\tuseSelector((state) => state.PAX.PAX) | \"\"\n\t);\n\tconst [valPAX, setValPAX] = useState(\"\");\n\n\tconst PAXs = useSelector((state) => state.PAX.PAXs);\n\n\tconst regions = useSelector((state) => state.location.regions);\n\n\tconst sexeName = useSelector((state) => state.PAX.sexe);\n\tconst [valRegion, setValRegion] = useState(\"\");\n\n\tconst dispatch = useDispatch();\n\tconst [id, setId] = useState(0);\n\tconst { enqueueSnackbar } = useSnackbar();\n\tconst { user } = useAuth();\n\n\tconst Schema = Yup.object().shape({\n\t\tregion: Yup.string().required(\"Entrer la région du PAX\"),\n\t\tsexe: Yup.number().required(\"Entrer le sexe du PAX\"),\n\t\treferent: Yup.string().required(\"Entrer le référent du PAX\"),\n\t});\n\tconst formik = useFormik({\n\t\tenableReinitialize: true,\n\t\tinitialValues: {\n\t\t\tPAX: \"\",\n\t\t\tCIU: \"\",\n\t\t\tregion: \"\",\n\t\t\treferent: \"\",\n\t\t\tsexe: \"\",\n\t\t},\n\t\tvalidationSchema: Schema,\n\t\tonSubmit: async (values, { setSubmitting, resetForm, setErrors }) => {\n\t\t\tconst dataSubmit = {\n\t\t\t\tpax: valPAX.id,\n\t\t\t\treferent: values.referent,\n\t\t\t\tresponsable: user.id,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tawait submit(dataSubmit);\n\t\t\t\tawait resetAllForm();\n\t\t\t\tawait dispatch(resetPAX());\n\t\t\t\tsetValPAX(null);\n\t\t\t\tawait dispatch(resetSexe());\n\t\t\t\tenqueueSnackbar(\"Enregistrée avec succès\", { variant: \"success\" });\n\t\t\t\tawait dispatch(getPAXFB());\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tsetSubmitting(false);\n\t\t\t\tsetErrors(error);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst submit = (values) => {\n\t\tsetAllCollectes([...allCollectes, { id, ...values }]);\n\t\tsetId(id + 1);\n\t\tconsole.log(values);\n\t\tdispatch(createCollecte(values));\n\t};\n\tconst handleNew = () => {\n\t\tdispatch(setShow(true));\n\t};\n\n\tconst resetAllForm = () => {\n\t\tresetForm();\n\t};\n\n\tconst {\n\t\thandleChange,\n\t\tvalues,\n\t\thandleSubmit,\n\t\ttouched,\n\t\thandleBlur,\n\t\terrors,\n\t\tresetForm,\n\t\tsetFieldValue,\n\t\tisSubmitting,\n\t} = formik;\n\n\t// Data\n\tconst isInit = useRef(true);\n\n\tuseEffect(() => {\n\t\tdispatch(getRegions());\n\t\tdispatch(getSexes());\n\t\tdispatch(getPAXFB());\n\t}, []);\n\n\tuseEffect(() => {\n\t\tdispatch(getSexe(valPAX?.sexe));\n\t\tvalues.sexe = valPAX?.sexe;\n\t\tconsole.log(`sexe: ${sexeName}`);\n\t\tsetValRegion(\n\t\t\tregions?.filter((item) => item.id === valPAX?.region)[0]?.label || \"\"\n\t\t);\n\t\tconst dataPAX = {\n\t\t\tname: valPAX?.prenom || \"\",\n\t\t\tserial: `${valPAX?.serial_no || \"\"}/${valPAX?.date_inscription || \"\"}`,\n\t\t\tcodeSexe: String(valPAX?.code?.substring(0, 1) || \"\"),\n\t\t\tcode: valPAX?.code || \"\",\n\t\t\tcodeRegion: String(valPAX?.code?.substring(11, 13) || \"\"),\n\t\t};\n\t\tdispatch(setPax(dataPAX));\n\t}, [valPAX]);\n\n\treturn (\n\t\t<FormikProvider value={formik}>\n\t\t\t<Form noValidate autoComplete=\"on\" onSubmit={handleSubmit}>\n\t\t\t\t<Stack direction=\"column\" spacing={3} sx={{ mt: 3 }}>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\">PAX</Typography>\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\tdisablePortal\n\t\t\t\t\t\tname=\"nomFb\"\n\t\t\t\t\t\toptions={PAXs}\n\t\t\t\t\t\tgetOptionLabel={(option) => option?.nom_fb || \"\"}\n\t\t\t\t\t\tvalue={valPAX}\n\t\t\t\t\t\tonChange={(event, newValue) => {\n\t\t\t\t\t\t\tsetValPAX(newValue);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputValue={values.nomFb}\n\t\t\t\t\t\tonInputChange={(event, newInputValue) => {\n\t\t\t\t\t\t\tsetFieldValue(\"nomFb\", newInputValue);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\tlabel=\"Nom Facebook du PAX\"\n\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Typography variant=\"body1\">Prenom PAX: {valPAX?.prenom} </Typography>\n\n\t\t\t\t\t<Typography variant=\"body1\">Sexe: {sexeName}</Typography>\n\t\t\t\t\t<Typography variant=\"body1\">Code Ezaho: {valPAX?.code}</Typography>\n\t\t\t\t\t<Typography variant=\"body1\">Région: {valRegion}</Typography>\n\t\t\t\t</Stack>\n\t\t\t</Form>\n\t\t</FormikProvider>\n\t);\n}\n","import { QRCodeCanvas } from \"qrcode.react\";\n\nconst QRGenerator = ({ valueString, documentID }) => {\n\treturn (\n\t\t<div>\n\t\t\t<QRCodeCanvas\n\t\t\t\tid={documentID}\n\t\t\t\tvalue={valueString}\n\t\t\t\tsize={256}\n\t\t\t\tbgColor=\"#fff\"\n\t\t\t\tfgColor=\"#000\"\n\t\t\t\tlevel=\"H\"\n\t\t\t\tincludeMargin={true}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default QRGenerator;\n","export default __webpack_public_path__ + \"static/media/Carte-Ezaho.4471a660.png\";","import React, { useState, useEffect } from \"react\";\nimport {\n\tDocument,\n\tPage,\n\tImage,\n\tStyleSheet,\n\tFont,\n\tText,\n\tPDFViewer,\n\tView,\n} from \"@react-pdf/renderer\";\nimport CarteBG from \"./Carte-Ezaho.png\";\n\nfunction Viewer({ id, name, serial, codeSexe, code, codeRegion }) {\n\tconst [dataUrl, setDataUrl] = useState(\n\t\tdocument.getElementById(id)?.toDataURL()\n\t);\n\tuseEffect(() => {\n\t\tsetDataUrl(document.getElementById(id).toDataURL());\n\t}, [code]);\n\n\tconst codeEzaho = code.substring(2, 10);\n\n\treturn (\n\t\t<PDFViewer width=\"100%\" height=\"400vh\">\n\t\t\t<Document>\n\t\t\t\t<Page size=\"B7\" orientation=\"landscape\">\n\t\t\t\t\t<Image style={styles.background} src={CarteBG} fixed />\n\t\t\t\t\t<Image allowDangerousPaths src={dataUrl} style={styles.QRImage} />\n\t\t\t\t\t<Text style={styles.series}>{serial}</Text>\n\t\t\t\t\t<Text style={styles.user}>{name}</Text>\n\t\t\t\t\t<Text style={styles.codeSexe}>{codeSexe}</Text>\n\t\t\t\t\t<Text style={styles.code}>{codeEzaho}</Text>\n\t\t\t\t\t<Text style={styles.codeRegion}>{codeRegion}</Text>\n\t\t\t\t</Page>\n\t\t\t</Document>\n\t\t</PDFViewer>\n\t);\n}\n\nFont.register({\n\tfamily: \"Noto-Sans\",\n\tsrc: \"https://fontsfree.net//wp-content/fonts/basic/sans-serif/FontsFree-Net-NotoSans-Bold.ttf\",\n});\nFont.register({\n\tfamily: \"Oswald\",\n\tsrc: \"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf\",\n});\nFont.register({\n\tfamily: \"Myriad\",\n\tsrc: \"https://www.wfonts.com/download/data/2016/06/13/myriad-pro/MyriadPro-Bold.otf\",\n});\n\nconst styles = StyleSheet.create({\n\tbody: {\n\t\tpaddingTop: 35,\n\t\tpaddingBottom: 65,\n\t\tpaddingHorizontal: 35,\n\t},\n\tbackground: {\n\t\tposition: \"absolute\",\n\t\twidth: \"100%\",\n\t\theight: \"auto\",\n\t\tzIndex: -2,\n\t},\n\tsidebar: {\n\t\tposition: \"absolute\",\n\t\tleft: \"0px\",\n\t\ttop: \"0px\",\n\t\t// transformOrigin: \"60% 60% 0px\",\n\t\twidth: \"169px\",\n\t\theight: \"842px\",\n\t\tzIndex: 1,\n\t},\n\ttext: {\n\t\tmargin: 12,\n\t\tfontSize: 14,\n\t\ttextAlign: \"justify\",\n\t\tfontFamily: \"Times-Roman\",\n\t},\n\ttitle: {\n\t\tfontSize: 24,\n\t\ttextAlign: \"center\",\n\t\tfontFamily: \"Oswald\",\n\t},\n\tuser: {\n\t\tfontSize: 12,\n\t\ttextAlign: \"left\",\n\t\tfontFamily: \"Noto-Sans\",\n\t\ttop: 72,\n\t\tleft: 80,\n\t},\n\tseries: {\n\t\tfontSize: 12,\n\t\ttextAlign: \"left\",\n\t\tfontFamily: \"Oswald\",\n\t\tcolor: \"#fff\",\n\t\ttop: 39,\n\t\tleft: 270,\n\t},\n\tcodeSexe: {\n\t\tfontSize: 18,\n\t\ttextAlign: \"left\",\n\t\tfontFamily: \"Noto-Sans\",\n\t\tcolor: \"#000\",\n\t\ttop: 118,\n\t\tleft: 32,\n\t\tposition: \"absolute\",\n\t},\n\tcode: {\n\t\tfontSize: 18,\n\t\ttextAlign: \"left\",\n\t\tfontFamily: \"Noto-Sans\",\n\t\tcolor: \"#000\",\n\t\ttop: 118,\n\t\tleft: 110,\n\t\tposition: \"absolute\",\n\t\tletterSpacing: 3,\n\t},\n\tcodeRegion: {\n\t\tfontSize: 18,\n\t\ttextAlign: \"left\",\n\t\tfontFamily: \"Noto-Sans\",\n\t\tcolor: \"#fff\",\n\t\ttop: 118,\n\t\tleft: 300,\n\t\tposition: \"absolute\",\n\t},\n\tauthor: {\n\t\tfontSize: 12,\n\t\ttextAlign: \"center\",\n\t\tmarginBottom: 40,\n\t},\n\tsubtitle: {\n\t\tfontSize: 18,\n\t\tmargin: 12,\n\t\tfontFamily: \"Oswald\",\n\t},\n\theader: {\n\t\tfontSize: 12,\n\t\tmarginBottom: 20,\n\t\ttextAlign: \"center\",\n\t\tcolor: \"grey\",\n\t},\n\tQRImage: {\n\t\tposition: \"absolute\",\n\t\tleft: \"280px\",\n\t\ttop: \"159px\",\n\n\t\twidth: \"54px\",\n\t\theight: \"auto\",\n\t\tzIndex: 0,\n\t},\n});\nexport default Viewer;\n","import { useSelector } from \"react-redux\";\nimport QRCode from \"./qrcode\";\nimport Viewer from \"./viewer\";\n\nconst qrCodeData = [\n\t{ id: 1234, value: \"TEST1\" },\n\t{ id: 1235, value: \"TEST2\" },\n];\nconst qrCodeIds = qrCodeData.map((data) => data.id);\n\nconst Carte = () => {\n\tconst PAX = useSelector((state) => state.PAX.PAX);\n\tconsole.log(PAX);\n\treturn (\n\t\t<div>\n\t\t\t<div style={{ display: \"none\" }}>\n\t\t\t\t<QRCode valueString={String(PAX?.code || \"\")} documentID={1234} />\n\t\t\t</div>\n\n\t\t\t<Viewer\n\t\t\t\tid={1234}\n\t\t\t\tname={PAX?.name || \"\"}\n\t\t\t\tserial={PAX?.serial || \"\"}\n\t\t\t\tcodeSexe={PAX?.codeSexe[0] || \"\"}\n\t\t\t\tcode={PAX?.code || \"\"}\n\t\t\t\tcodeRegion={PAX?.codeRegion || \"\"}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Carte;\n","import { useEffect } from \"react\";\nimport { paramCase } from \"change-case\";\nimport { useParams, useLocation } from \"react-router-dom\";\n// material\nimport { Container, Grid } from \"@material-ui/core\";\n// redux\nimport { useDispatch, useSelector } from \"../../redux/store\";\n\n// routes\nimport { PATH_DASHBOARD } from \"../../routes/paths\";\n// hooks\nimport useSettings from \"../../hooks/useSettings\";\n// components\nimport Page from \"../../components/Page\";\nimport HeaderBreadcrumbs from \"../../components/HeaderBreadcrumbs\";\nimport PAXSelect from \"../../components/ezaho/PAXSelect\";\nimport Cartes from \"../../components/Ezaho-card/carte\";\nimport NewPAX from \"../../components/ezaho/NewPax\";\n\n// ----------------------------------------------------------------------\n\nexport default function Collecte() {\n\tconst { themeStretch } = useSettings();\n\tconst dispatch = useDispatch();\n\tconst { pathname } = useLocation();\n\tconst { name } = useParams();\n\n\treturn (\n\t\t<Page title=\"Carte | e-zaho\">\n\t\t\t<Container maxWidth={themeStretch ? false : \"lg\"}>\n\t\t\t\t<HeaderBreadcrumbs\n\t\t\t\t\theading={\"Carte E-zaho\"}\n\t\t\t\t\tlinks={[\n\t\t\t\t\t\t{ name: \"Dashboard\", href: PATH_DASHBOARD.EZAHO.dashboard },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"Carte\",\n\t\t\t\t\t\t\thref: PATH_DASHBOARD.EZAHO.collecte,\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\n\t\t\t\t<Grid container spacing={3}>\n\t\t\t\t\t<Grid item xs={12} md={4}>\n\t\t\t\t\t\t<PAXSelect />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} md={8}>\n\t\t\t\t\t\t<Cartes valueString={\"M&E 3.0\"} documentID=\"RAKOTO\" />\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t</Page>\n\t);\n}\n"],"sourceRoot":""}